<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>àª¬àª¾àª³àª• àª®àª¾àª¹àª¿àª¤à«€ àªµà«àª¯àªµàª¸à«àª¥àª¾àªªàª¨ àªªà«àª°àª£àª¾àª²à«€</title>

<!-- DataTables CSS (for buttons/colvis) -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  /* CSS Variables for Light Theme */
  :root {
    --bg: linear-gradient(135deg, #f8f9ff 0%, #e6f0ff 100%);
    --card: #ffffff;
    --primary: #6a11cb;
    --secondary: #2575fc;
    --accent: #ff6b6b;
    --muted: #6c757d;
    --success: #28a745;
    --warning: #ffc107;
    --danger: #dc3545;
    --info: #17a2b8;
    --light: #f8f9fa;
    --dark: #343a40;
    --radius: 12px;
    --shadow: 0 10px 30px rgba(0,0,0,0.1);
    --shadow-sm: 0 4px 6px rgba(0,0,0,0.07);
    --text-color: #333;
    --header-bg: linear-gradient(90deg, #6a11cb, #2575fc);
    --form-bg: linear-gradient(to right, #ffffff, #f8f9ff);
    --border-color: #eaeef7;
    --table-header-bg: linear-gradient(to right, #f8f9ff, #eaeef7);
    --table-row-hover: #eaeef7;
    --table-row-even: #f8f9ff;
    --footer-bg: linear-gradient(to right, #f8f9ff, #eaeef7);
    --toggle-bg: #6a11cb;
    --toggle-circle: #ffffff;
  }

  /* CSS Variables for Dark Theme */
  [data-theme="dark"] {
    --bg: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
    --card: #1e1e2e;
    --primary: #bb86fc;
    --secondary: #03dac6;
    --accent: #cf6679;
    --muted: #9ca3af;
    --success: #4caf50;
    --warning: #ff9800;
    --danger: #f44336;
    --info: #03a9f4;
    --light: #374151;
    --dark: #f9fafb;
    --radius: 12px;
    --shadow: 0 10px 30px rgba(0,0,0,0.3);
    --shadow-sm: 0 4px 6px rgba(0,0,0,0.2);
    --text-color: #e5e7eb;
    --header-bg: linear-gradient(90deg, #bb86fc, #03dac6);
    --form-bg: linear-gradient(to right, #1e1e2e, #2d2d44);
    --border-color: #374151;
    --table-header-bg: linear-gradient(to right, #374151, #4b5563);
    --table-row-hover: #374151;
    --table-row-even: #2d3748;
    --footer-bg: linear-gradient(to right, #1e1e2e, #2d2d44);
    --toggle-bg: #bb86fc;
    --toggle-circle: #f9fafb;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    background:var(--bg);
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color:var(--text-color);
    line-height:1.6;
    padding:20px;
    transition: all 0.3s ease;
  }
  .container{
    max-width:1200px;
    margin:0 auto;
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:30px;
    animation: fadeIn 0.5s ease-in-out;
    transition: all 0.3s ease;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  /* Theme Toggle Switch */
  .theme-toggle-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
  }
  
  .theme-toggle {
    position: relative;
    width: 70px;
    height: 34px;
    background: var(--toggle-bg);
    border-radius: 34px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  .theme-toggle-circle {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 28px;
    height: 28px;
    background: var(--toggle-circle);
    border-radius: 50%;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .theme-toggle-circle i {
    font-size: 16px;
    color: var(--toggle-bg);
  }
  
  [data-theme="dark"] .theme-toggle-circle {
    transform: translateX(36px);
  }
  
  .theme-toggle:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0,0,0,0.15);
  }
  
  h1{
    margin:0 0 20px;
    font-size:28px;
    color:var(--primary);
    text-align:center;
    position:relative;
    padding-bottom:15px;
  }
  h1:after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 3px;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    border-radius: 3px;
  }
  /* Header with icon */
  .header-icon {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
  }
  .header-icon i {
    font-size: 48px;
    color: var(--primary);
    background: rgba(106, 17, 203, 0.1);
    padding: 15px;
    border-radius: 50%;
    transition: all 0.3s ease;
  }
  
  [data-theme="dark"] .header-icon i {
    background: rgba(187, 134, 252, 0.1);
  }
  
  /* Form styling */
  .form-card {
    background: var(--form-bg);
    border-radius: var(--radius);
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
  }
  
  .form-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow);
  }
  
  .form-title {
    font-size: 20px;
    color: var(--primary);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
  }
  .form-title i {
    margin-right: 10px;
  }
  form{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
  }
  @media(max-width:760px){form{grid-template-columns:1fr}}
  .form-group {
    display: flex;
    flex-direction: column;
  }
  label{
    font-size:14px;
    color:var(--text-color);
    margin-bottom:6px;
    font-weight:600;
    display: flex;
    align-items: center;
  }
  label i {
    margin-right: 5px;
    color: var(--primary);
  }
  input[type="text"], input[type="date"], input[type="tel"], input[type="number"], select{
    width:100%;
    padding:12px 15px;
    border:1px solid var(--border-color);
    border-radius:8px;
    background:var(--card);
    font-size:14px;
    color:var(--text-color);
    transition:all 0.3s ease;
  }
  input:focus, select:focus{
    outline:none;
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(106, 17, 203, 0.2);
  }
  
  [data-theme="dark"] input:focus, [data-theme="dark"] select:focus {
    box-shadow:0 0 0 3px rgba(187, 134, 252, 0.2);
  }
  
  .btn-primary{
    grid-column:1/-1;
    background:linear-gradient(90deg,var(--primary),var(--secondary));
    color:white;
    padding:12px 20px;
    border-radius:8px;
    border:none;
    font-weight:600;
    cursor:pointer;
    font-size:16px;
    transition:all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .btn-primary i {
    margin-right: 8px;
  }
  .btn-primary:hover{
    transform:translateY(-2px);
    box-shadow:0 5px 15px rgba(106, 17, 203, 0.3);
  }
  
  [data-theme="dark"] .btn-primary:hover {
    box-shadow:0 5px 15px rgba(187, 134, 252, 0.3);
  }
  
  /* Filters section */
  .filters-card {
    background: var(--form-bg);
    border-radius: var(--radius);
    padding: 20px;
    margin-bottom: 25px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
  }
  
  .filters-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow);
  }
  
  .filters-title {
    font-size: 18px;
    color: var(--primary);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
  }
  .filters-title i {
    margin-right: 10px;
  }
  .filters{
    display:flex;
    gap:15px;
    align-items:center;
    flex-wrap:wrap;
  }
  .filters .left{
    display:flex;
    gap:10px;
    align-items:center;
  }
  .filters select{
    padding:10px 15px;
    border-radius:8px;
    border:1px solid var(--border-color);
    background:var(--card);
    min-width:150px;
    color:var(--text-color);
  }
  
  /* Records per page selector - Made much smaller */
  .records-selector {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 12px;
  }
  
  .records-selector label {
    margin: 0;
    font-size: 12px;
    color: var(--text-color);
    white-space: nowrap;
  }
  
  .records-selector select {
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid var(--border-color);
    background: var(--card);
    color: var(--text-color);
    min-width: auto;
    font-size: 12px;
    width: 50px;
  }
  
  /* Table section */
  .table-card {
    background: var(--form-bg);
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
  }
  
  .table-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow);
  }
  
  .table-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    flex-wrap: wrap;
    gap: 10px;
  }
  
  .table-title {
    font-size: 18px;
    color: var(--primary);
    display: flex;
    align-items: center;
  }
  .table-title i {
    margin-right: 10px;
  }
  .table-wrap{
    overflow:auto;
    background:var(--card);
    padding:15px;
    border-radius:8px;
    box-shadow:var(--shadow-sm);
  }
  table.dataTable{
    width:100% !important;
    border-collapse:collapse;
  }
  th,td{
    padding:12px 15px;
    border-bottom:1px solid var(--border-color);
    vertical-align:middle;
  }
  th{
    background:var(--table-header-bg);
    font-weight:600;
    color:var(--primary);
    position: sticky;
    top: 0;
  }
  tr:nth-child(even) td{
    background:var(--table-row-even);
  }
  tr:hover td {
    background: var(--table-row-hover);
  }
  /* Grade pills */
  .pill{
    display:inline-block;
    padding:6px 12px;
    border-radius:20px;
    color:white;
    font-weight:600;
    font-size:13px;
  }
  .pill.ok{background:var(--success)}
  .pill.warn{background:var(--warning);color:#333}
  .pill.bad{background:var(--danger)}
  /* Action buttons */
  .action-btn{
    border:none;
    padding:8px 12px;
    border-radius:6px;
    color:#fff;
    font-weight:600;
    cursor:pointer;
    margin-right:5px;
    transition:all 0.3s ease;
  }
  .action-btn i {
    margin-right: 5px;
  }
  .edit{
    background:linear-gradient(90deg,var(--info),#0c7b93);
  }
  .edit:hover{
    transform:translateY(-2px);
    box-shadow:0 4px 8px rgba(23, 162, 184, 0.3);
  }
  .del{
    background:linear-gradient(90deg,var(--danger),#a71e2a);
  }
  .del:hover{
    transform:translateY(-2px);
    box-shadow:0 4px 8px rgba(220, 53, 69, 0.3);
  }
  .dt-button{
    border-radius:8px;
    padding:8px 12px;
    margin-right:8px;
    background:linear-gradient(90deg,var(--primary),var(--secondary));
    border:none;
    color:#fff;
    font-weight:600;
    transition:all 0.3s ease;
  }
  .dt-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(106, 17, 203, 0.3);
  }
  
  [data-theme="dark"] .dt-button:hover {
    box-shadow: 0 4px 8px rgba(187, 134, 252, 0.3);
  }
  
  /* DataTables pagination and length menu styling */
  .dataTables_wrapper .dataTables_paginate .paginate_button {
    color: var(--text-color) !important;
    background: var(--card) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 4px !important;
    margin: 0 2px !important;
    padding: 5px 10px !important;
  }
  
  .dataTables_wrapper .dataTables_paginate .paginate_button.current {
    background: var(--primary) !important;
    color: white !important;
  }
  
  .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
    background: var(--secondary) !important;
    color: white !important;
  }
  
  .dataTables_wrapper .dataTables_length select {
    background: var(--card) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 4px !important;
    padding: 5px !important;
  }
  
  .dataTables_wrapper .dataTables_info {
    color: var(--text-color) !important;
  }
  
  /* Footer */
  footer{
    margin-top:20px;
    text-align:center;
    color:var(--muted);
    font-size:14px;
    padding:15px;
    background: var(--footer-bg);
    border-radius: var(--radius);
    transition: all 0.3s ease;
  }
  /* Responsive adjustments */
  @media(max-width:768px){
    .container{padding:15px;}
    h1{font-size:24px;}
    .form-card, .filters-card, .table-card {
      padding: 15px;
    }
    .theme-toggle-container {
      top: 10px;
      right: 10px;
    }
    .table-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }
    .dt-button {
      font-size: 12px;
      padding: 6px 8px;
      margin-right: 5px;
    }
    .action-btn {
      padding: 6px 8px;
      font-size: 12px;
    }
    th, td {
      padding: 8px 5px;
      font-size: 12px;
    }
  }
  @media(max-width:420px){
    .filters{flex-direction:column;align-items:stretch}
    .dt-button{width:100%; margin-bottom:8px}
    .table-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }
    .dt-buttons {
      display: flex;
      flex-wrap: wrap;
      width: 100%;
      gap: 5px;
    }
    .dt-button {
      width: calc(50% - 5px);
      margin-right: 0;
      margin-bottom: 5px;
      font-size: 11px;
      padding: 5px 6px;
    }
    .dataTables_wrapper .dataTables_paginate {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2px;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      margin: 0 1px !important;
      padding: 4px 6px !important;
      font-size: 11px;
    }
  }
  /* Loading animation */
  .loader {
    border: 4px solid var(--card);
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 20px auto;
    display: none;
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  /* Success message */
  .success-message {
    background: var(--success);
    color: white;
    padding: 10px 15px;
    border-radius: 8px;
    margin-bottom: 15px;
    display: none;
    align-items: center;
  }
  .success-message i {
    margin-right: 10px;
  }
</style>
</head>
<body>

<div class="theme-toggle-container">
  <div class="theme-toggle" id="themeToggle">
    <div class="theme-toggle-circle">
      <i class="fas fa-sun" id="themeIcon"></i>
    </div>
  </div>
</div>

<div class="container">
  <div class="header-icon">
    <i class="fas fa-child"></i>
  </div>
  <h1>àª¬àª¾àª³àª• àª®àª¾àª¹àª¿àª¤à«€ àªµà«àª¯àªµàª¸à«àª¥àª¾àªªàª¨ àªªà«àª°àª£àª¾àª²à«€</h1>

  <!-- Success Message -->
  <div class="success-message" id="successMessage">
    <i class="fas fa-check-circle"></i>
    <span id="successText">àª®àª¾àª¹àª¿àª¤à«€ àª¸àª«àª³àª¤àª¾àªªà«‚àª°à«àªµàª• àª¸àª¾àªšàªµà«€ àª—àªˆ!</span>
  </div>

  <!-- Form Card -->
  <div class="form-card">
    <div class="form-title">
      <i class="fas fa-user-plus"></i>
      àª¬àª¾àª³àª•àª¨à«€ àª®àª¾àª¹àª¿àª¤à«€ àª‰àª®à«‡àª°à«‹
    </div>
    <form id="childForm">
      <input type="hidden" id="editId">
      <div class="form-group">
        <label for="name"><i class="fas fa-user"></i> àª¬àª¾àª³àª•àª¨à«àª‚ àª¨àª¾àª®</label>
        <input id="name" type="text" required placeholder="àª¬àª¾àª³àª•àª¨à«àª‚ àªªà«‚àª°à«àª‚ àª¨àª¾àª® àª²àª–à«‹">
      </div>
      <div class="form-group">
        <label for="motherName"><i class="fas fa-female"></i> àª®àª¾àª¤àª¾àª¨à«àª‚ àª¨àª¾àª®</label>
        <input id="motherName" type="text" required placeholder="àª®àª¾àª¤àª¾àª¨à«àª‚ àªªà«‚àª°à«àª‚ àª¨àª¾àª®">
      </div>

      <div class="form-group">
        <label for="sex"><i class="fas fa-venus-mars"></i> àª²àª¿àª‚àª—</label>
        <select id="sex" required>
          <option value="">àªªàª¸àª‚àª¦ àª•àª°à«‹</option>
          <option value="boy">àª›à«‹àª•àª°à«‹</option>
          <option value="girl">àª›à«‹àª•àª°à«€</option>
        </select>
      </div>
      <div class="form-group">
        <label for="dob"><i class="fas fa-calendar-alt"></i> àªœàª¨à«àª®àª¤àª¾àª°à«€àª–</label>
        <input id="dob" type="date" required>
      </div>

      <div class="form-group">
        <label for="mobileNumber"><i class="fas fa-mobile-alt"></i> àª®à«‹àª¬àª¾àª‡àª² àª¨àª‚àª¬àª°</label>
        <input id="mobileNumber" type="tel" placeholder="10 àª…àª‚àª•àª¨à«‹ àª®à«‹àª¬àª¾àª‡àª² àª¨àª‚àª¬àª°">
      </div>
      <div class="form-group">
        <label for="aadhaarNumber"><i class="fas fa-id-card"></i> àª†àª§àª¾àª° àª¨àª‚àª¬àª°</label>
        <input id="aadhaarNumber" type="text" placeholder="12 àª…àª‚àª•àª¨à«‹ àª†àª§àª¾àª° àª¨àª‚àª¬àª°">
      </div>

      <div class="form-group">
        <label for="apaarId"><i class="fas fa-address-card"></i> àª…àªªàª¾àª° ID</label>
        <input id="apaarId" type="text" placeholder="àªœà«‹ àª¹à«‹àª¯ àª¤à«‹">
      </div>
      <div class="form-group">
        <label for="abhaId"><i class="fas fa-hospital"></i> àª†àª­àª¾ ID</label>
        <input id="abhaId" type="text" placeholder="àªœà«‹ àª¹à«‹àª¯ àª¤à«‹">
      </div>

      <div class="form-group">
        <label for="weight"><i class="fas fa-weight"></i> àªµàªœàª¨ (àª•àª¿àª—à«àª°àª¾)</label>
        <input id="weight" type="number" step="0.1" required placeholder="àª‰àª¦àª¾àª¹àª°àª£: 6.5">
      </div>
      <div class="form-group">
        <label for="height"><i class="fas fa-ruler-vertical"></i> àªŠàª‚àªšàª¾àªˆ (àª¸à«‡àª®à«€)</label>
        <input id="height" type="number" step="0.1" required placeholder="àª‰àª¦àª¾àª¹àª°àª£: 65.2">
      </div>

      <button class="btn-primary" type="submit">
        <i class="fas fa-save"></i>
        àª¬àª¾àª³àª• àª‰àª®à«‡àª°à«‹ / àª…àªªàª¡à«‡àªŸ àª•àª°à«‹
      </button>
    </form>
  </div>

  <!-- Filters Card -->
  <div class="filters-card">
    <div class="filters-title">
      <i class="fas fa-filter"></i>
      àª«àª¿àª²à«àªŸàª°à«àª¸ àª…àª¨à«‡ àªàª•à«àª¸àªªà«‹àª°à«àªŸ
    </div>
    <div class="filters" style="justify-content:space-between;align-items:center">
      <div style="display:flex;gap:8px;align-items:center">
        <!-- DataTables will render buttons here -->
        <div id="dtButtons"></div>
      </div>

      <div style="display:flex;gap:8px;align-items:center">
        <select id="ageGroupFilter" title="àª‰àª‚àª®àª° àªœà«‚àª¥àª¥à«€ àª«àª¿àª²à«àªŸàª°">
          <option value="">àª¬àª§àª¾ àª‰àª‚àª®àª° àªœà«‚àª¥</option>
          <option value="(0-6mnth)">0-6 àª®àª¹àª¿àª¨àª¾</option>
          <option value="(6-1yr)">6-12 àª®àª¹àª¿àª¨àª¾</option>
          <option value="(1-3 yr)">1-3 àªµàª°à«àª·</option>
          <option value="(3-5 yr)">3-5 àªµàª°à«àª·</option>
          <option value="(5-6 yr)">5-6 àªµàª°à«àª·</option>
        </select>

        <select id="sexFilter" title="àª²àª¿àª‚àª—àª¥à«€ àª«àª¿àª²à«àªŸàª°">
          <option value="">àª¬àª§àª¾ (àª²àª¿àª‚àª—)</option>
          <option value="boy">àª›à«‹àª•àª°à«‹</option>
          <option value="girl">àª›à«‹àª•àª°à«€</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Table Card -->
  <div class="table-card">
    <div class="table-header">
      <div class="table-title">
        <i class="fas fa-table"></i>
        àª¬àª¾àª³àª•à«‹àª¨à«€ àª®àª¾àª¹àª¿àª¤à«€
      </div>
      <div class="records-selector">
        <label for="recordsPerPage">àªªà«àª°àª¤àª¿ àªªà«‡àªœ:</label>
        <select id="recordsPerPage">
          <option value="10">10</option>
          <option value="15">15</option>
          <option value="20">20</option>
        </select>
      </div>
    </div>
    <div class="loader" id="tableLoader"></div>
    <div class="table-wrap">
      <div class="table-wrap-inner" style="margin-top:10px">
        <table id="childTable" class="display" style="width:100%">
          <thead>
            <tr>
              <th>àª•à«àª°àª®</th>
              <th>àª¬àª¾àª³àª•àª¨à«àª‚ àª¨àª¾àª®</th>
              <th>àª®àª¾àª¤àª¾àª¨à«àª‚ àª¨àª¾àª®</th>
              <th>àª²àª¿àª‚àª—</th>
              <th>àªœàª¨à«àª®àª¤àª¾àª°à«€àª–</th>
              <th>àª‰àª‚àª®àª°</th>
              <th>àª‰àª‚àª®àª°àªœà«‚àª¥</th>
              <th>àª®à«‹àª¬àª¾àª‡àª²</th>
              <th>àª†àª§àª¾àª°</th>
              <th>àª…àªªàª¾àª° ID</th>
              <th>àª†àª­àª¾ ID</th>
              <th>àªµàªœàª¨</th>
              <th>àªŠàª‚àªšàª¾àªˆ</th>
              <th>àª—à«àª°à«‡àª¡</th>
              <th>àª•à«àª°àª¿àª¯àª¾</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <footer>
    <i class="fas fa-code"></i> àªµàª¿àª•àª¸àª¿àª¤ àª•àª°à«àª¯à«àª‚: àª¦à«‡àªµà«‡àª¨à«àª¦à«àª° àª°àª¾àª®àª¾àª¨à«àªœ â€¢ 9276505035 ğŸ™
  </footer>
</div>

<!-- Scripts: jQuery + DataTables + Buttons + export libs -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

<script>
/* -------------------------
   Theme Toggle
   ------------------------- */
document.addEventListener('DOMContentLoaded', function() {
  // Check for saved theme preference or default to light mode
  const currentTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', currentTheme);
  
  // Update icon based on current theme
  const themeIcon = document.getElementById('themeIcon');
  if (currentTheme === 'dark') {
    themeIcon.classList.remove('fa-sun');
    themeIcon.classList.add('fa-moon');
  }
  
  // Add click event to toggle theme
  const themeToggle = document.getElementById('themeToggle');
  themeToggle.addEventListener('click', function() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    // Update theme
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    
    // Update icon
    if (newTheme === 'dark') {
      themeIcon.classList.remove('fa-sun');
      themeIcon.classList.add('fa-moon');
    } else {
      themeIcon.classList.remove('fa-moon');
      themeIcon.classList.add('fa-sun');
    }
  });
});

/* -------------------------
   LocalStorage helpers
   ------------------------- */
function getChildren(){ return JSON.parse(localStorage.getItem('childrenData')||'[]'); }
function setChildren(arr){ localStorage.setItem('childrenData', JSON.stringify(arr)); }

/* -------------------------
   Utils: age, group, grade
   ------------------------- */
function calculateAge(dobStr){
  if(!dobStr) return '';
  const dob = new Date(dobStr);
  const today = new Date();
  let years = today.getFullYear() - dob.getFullYear();
  let months = today.getMonth() - dob.getMonth();
  if (today.getDate() < dob.getDate()) months--;
  if (months < 0) { years--; months += 12; }
  return `${years} àªµàª°à«àª·, ${months} àª®àª¹àª¿àª¨àª¾`;
}
function calculateAgeGroup(dobStr){
  if(!dobStr) return '';
  const dob = new Date(dobStr), today = new Date();
  let totalMonths = (today.getFullYear()-dob.getFullYear())*12 + (today.getMonth()-dob.getMonth());
  if (today.getDate() < dob.getDate()) totalMonths--;
  if (totalMonths <= 6) return "(0-6mnth)";
  if (totalMonths <= 12) return "(6-1yr)";
  if (totalMonths <= 36) return "(1-3 yr)";
  if (totalMonths <= 60) return "(3-5 yr)";
  if (totalMonths <= 72) return "(5-6 yr)";
  return "";
}
function calculateGrade(weight, height){
  const h = Number(height);
  const w = Number(weight);
  if (!h || !w) return { text: '-', cls: '' };
  const bmi = w / ((h/100)*(h/100));
  if (bmi < 16) return { text: 'àª…àª¤àª¿ àª—àª‚àª­à«€àª°', cls: 'pill bad' };
  if (bmi < 18.5) return { text: 'àª—àª‚àª­à«€àª°', cls: 'pill warn' };
  return { text: 'àª¸àª¾àª®àª¾àª¨à«àª¯', cls: 'pill ok' };
}

/* -------------------------
   Show success message
   ------------------------- */
function showSuccessMessage(message) {
  $('#successText').text(message);
  $('#successMessage').fadeIn().delay(2000).fadeOut();
}

/* -------------------------
   DataTable initialization
   ------------------------- */
let table;
function initDataTable(){
  // If exists, destroy
  if ($.fn.DataTable.isDataTable('#childTable')) {
    table.clear().draw();
    table.destroy();
  }

  // Get the screen width to determine responsive behavior
  const isMobile = window.innerWidth < 768;
  
  // Get selected records per page value
  const recordsPerPage = $('#recordsPerPage').val() || 10;

  table = $('#childTable').DataTable({
    dom: isMobile ? 'Brtip' : 'lBrtip',          // Hide default length menu on mobile
    buttons: [
      { extend: 'excelHtml5', text: '<i class="fas fa-file-excel"></i> àªàª•à«àª¸à«‡àª²' },
      { extend: 'pdfHtml5', text: '<i class="fas fa-file-pdf"></i> àªªà«€àª¡à«€àªàª«' },
      { extend: 'print', text: '<i class="fas fa-print"></i> àª›àª¾àªªà«‹' },
      { extend: 'colvis', text: '<i class="fas fa-columns"></i> àª•à«‰àª²àª®' }
    ],
    columnDefs: [
      { targets: 14, orderable: false } // action column not sortable
    ],
    paging: true,
    pageLength: parseInt(recordsPerPage),
    lengthChange: !isMobile, // Disable length change on mobile
    lengthMenu: [[10, 15, 20], [10, 15, 20]],
    info: true,
    language: { 
      emptyTable: "àª•à«‹àªˆ àª°à«‡àª•à«‹àª°à«àª¡ àª®àª³à«àª¯àª¾ àª¨àª¥à«€",
      info: "àª•à«àª² _START_ àª¥à«€ _END_ àª¨àª¾ _TOTAL_ àª°à«‡àª•à«‹àª°à«àª¡",
      paginate: {
        first: "àªªà«àª°àª¥àª®",
        last: "àª…àª‚àª¤àª¿àª®",
        next: "àª†àª—àª³",
        previous: "àªªàª¾àª›àª³"
      },
      lengthMenu: "àªªà«àª°àª¤àª¿ àªªà«‡àªœ _MENU_ àª°à«‡àª•à«‹àª°à«àª¡ àª¬àª¤àª¾àªµà«‹"
    },
    responsive: true
  });

  // Move buttons to our custom container for styling
  table.buttons().container().appendTo('#dtButtons');
}

/* -------------------------
   Render rows from storage
   ------------------------- */
function renderRows(){
  $('#tableLoader').show();
  initDataTable();
  const data = getChildren();
  data.forEach((c, idx) => {
    const grade = calculateGrade(c.weight, c.height);
    const row = [
      idx + 1,
      c.name || '',
      c.motherName || '',
      c.sex === 'boy' ? 'àª›à«‹àª•àª°à«‹' : (c.sex === 'girl' ? 'àª›à«‹àª•àª°à«€' : ''),
      c.dob || '',
      calculateAge(c.dob),
      calculateAgeGroup(c.dob),
      c.mobileNumber || '',
      c.aadhaarNumber || '',
      c.apaarId || '',
      c.abhaId || '',
      c.weight !== undefined ? c.weight : '',
      c.height !== undefined ? c.height : '',
      `<span class="${grade.cls}">${grade.text}</span>`,
      `<button class="action-btn edit" data-id="${c.id}"><i class="fas fa-edit"></i> àª¸à«àª§àª¾àª°à«‹</button>
       <button class="action-btn del" data-id="${c.id}"><i class="fas fa-trash"></i> àª•àª¾àª¢à«‹</button>`
    ];
    table.row.add(row).draw(false);
  });
  $('#tableLoader').hide();

  // Wire edit/delete clicks (delegated)
  $('#childTable tbody').off('click').on('click', 'button.edit', function(){
    const id = Number($(this).data('id')); startEdit(id);
  });
  $('#childTable tbody').on('click', 'button.del', function(){
    const id = Number($(this).data('id')); confirmDelete(id);
  });
}

/* -------------------------
   Form handlers: add / edit
   ------------------------- */
 $('#childForm').on('submit', function(e){
  e.preventDefault();
  const editId = $('#editId').val();
  const child = {
    id: editId ? Number(editId) : Date.now(),
    name: $('#name').val().trim(),
    motherName: $('#motherName').val().trim(),
    sex: $('#sex').val(),
    dob: $('#dob').val(),
    mobileNumber: $('#mobileNumber').val().trim(),
    aadhaarNumber: $('#aadhaarNumber').val().trim(),
    apaarId: $('#apaarId').val().trim(),
    abhaId: $('#abhaId').val().trim(),
    weight: $('#weight').val(),
    height: $('#height').val()
  };

  let arr = getChildren();
  if (editId) {
    arr = arr.map(x => x.id === child.id ? child : x);
    showSuccessMessage('àª¬àª¾àª³àª•àª¨à«€ àª®àª¾àª¹àª¿àª¤à«€ àª¸àª«àª³àª¤àª¾àªªà«‚àª°à«àªµàª• àª…àªªàª¡à«‡àªŸ àª•àª°àª¾àªˆ!');
  } else {
    arr.push(child);
    showSuccessMessage('àª¨àªµàª¾ àª¬àª¾àª³àª•àª¨à«€ àª®àª¾àª¹àª¿àª¤à«€ àª¸àª«àª³àª¤àª¾àªªà«‚àª°à«àªµàª• àª‰àª®à«‡àª°àª¾àªˆ!');
  }
  setChildren(arr);
  // reset & re-render
  this.reset(); $('#editId').val('');
  renderTableRefresh();
});

/* -------------------------
   Edit flow
   ------------------------- */
function startEdit(id){
  const arr = getChildren();
  const c = arr.find(x => x.id === id);
  if (!c) return;
  $('#editId').val(c.id);
  $('#name').val(c.name);
  $('#motherName').val(c.motherName);
  $('#sex').val(c.sex);
  $('#dob').val(c.dob);
  $('#mobileNumber').val(c.mobileNumber);
  $('#aadhaarNumber').val(c.aadhaarNumber);
  $('#apaarId').val(c.apaarId);
  $('#abhaId').val(c.abhaId);
  $('#weight').val(c.weight);
  $('#height').val(c.height);
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* -------------------------
   Delete with confirmation
   ------------------------- */
function confirmDelete(id){
  const ok = confirm("àª¶à«àª‚ àª¤àª®à«‡ àª† àª°à«‡àª•à«‹àª°à«àª¡ àª–àª°à«‡àª–àª° àª¡àª¿àª²à«€àªŸ àª•àª°àªµàª¾ àª®àª¾àª‚àª—à«‹ àª›à«‹?");
  if (!ok) return;
  const arr = getChildren().filter(x => x.id !== id);
  setChildren(arr);
  showSuccessMessage('àª¬àª¾àª³àª•àª¨à«‹ àª°à«‡àª•à«‹àª°à«àª¡ àª¸àª«àª³àª¤àª¾àªªà«‚àª°à«àªµàª• àª•àª¾àª¢à«€ àª¨àª¾àª–àª¾àª¯à«‹!');
  renderTableRefresh();
}

/* -------------------------
   Filters: age & sex
   ------------------------- */
function applyFiltersToTable(){
  const ageVal = $('#ageGroupFilter').val();
  const sexVal = $('#sexFilter').val();

  table.rows().every(function(){
    const d = this.data();
    let show = true;
    if (ageVal) {
      show = (d[6] === ageVal); // ageGroup column
    }
    if (show && sexVal) {
      show = (sexVal === 'boy' ? d[3] === 'àª›à«‹àª•àª°à«‹' : d[3] === 'àª›à«‹àª•àª°à«€');
    }
    $(this.node()).toggle(show);
  });
}
 $('#ageGroupFilter, #sexFilter').on('change', applyFiltersToTable);

/* -------------------------
   Records per page selector
   ------------------------- */
 $('#recordsPerPage').on('change', function() {
  const recordsPerPage = $(this).val();
  table.page.len(recordsPerPage).draw();
});

/* -------------------------
   Helper to refresh table (destroy & re-render)
   ------------------------- */
function renderTableRefresh(){
  if ($.fn.DataTable.isDataTable('#childTable')) {
    table.clear().draw();
    table.destroy();
  }
  renderRows();
  applyFiltersToTable();
}

/* -------------------------
   Initial load
   ------------------------- */
 $(document).ready(function(){
  renderTableRefresh();
});
// Age group filter
$('#ageGroupFilter').on('change', function () {
    table.column(6).search(this.value).draw();
    table.page('first').draw('page');  // <-- ADD THIS LINE
});

// Sex filter
$('#sexFilter').on('change', function () {
    table.column(3).search(this.value).draw();
    table.page('first').draw('page');  // <-- ADD THIS LINE
});
</script>
</body>
</html>}
 
